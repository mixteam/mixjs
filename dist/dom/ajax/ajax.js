define("#mix/core/0.3.0/dom/ajax/ajax",["mix/core/0.3.0/dom/selector"],function(a){var b=a("mix/core/0.3.0/dom/selector");(function(a){function b(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}function c(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.defaultPrevented}function d(a,b,d,e){return a.global?c(b||t,d,e):void 0}function e(b){b.global&&0===a.active++&&d(b,null,"ajaxStart")}function f(b){b.global&&!--a.active&&d(b,null,"ajaxStop")}function g(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1||d(b,c,"ajaxBeforeSend",[a,b])===!1?!1:(d(b,c,"ajaxSend",[a,b]),void 0)}function h(a,b,c){var e=c.context,f="success";c.success.call(e,a,f,b),d(c,e,"ajaxSuccess",[b,c,a]),j(f,b,c)}function i(a,b,c,e){var f=e.context;e.error.call(f,c,b,a),d(e,f,"ajaxError",[c,e,a]),j(b,c,e)}function j(a,b,c){var e=c.context;c.complete.call(e,b,a),d(c,e,"ajaxComplete",[b,c]),f(c)}function k(){}function l(a){return a&&(a==y?"html":a==x?"json":v.test(a)?"script":w.test(a)&&"xml")||"text"}function m(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function n(b){s(b.data)&&(b.data=a.param(b.data)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=m(b.url,b.data))}function o(b,c,d,e){var f=a.isArray(c);a.each(c,function(c,g){e&&(c=d?e:e+"["+(f?"":c)+"]"),!e&&f?b.add(g.name,g.value):(d?a.isArray(g):s(g))?o(b,g,d,c):b.add(c,g)})}var p,q,r=0,s=a.isObject,t=window.document,u=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,v=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,x="application/json",y="text/html",z=/^\s*$/,A={};a.Event=function(a,b){var c=t.createEvent(A[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c},a.fn.trigger=function(c,d){return"string"==typeof c&&(c=a.Event(c)),b(c),c.data=d,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(c)})},a.active=0,a.ajaxJSONP=function(b){var c,d="jsonp"+ ++r,e=t.createElement("script"),f=function(){a(e).remove(),d in window&&(window[d]=k),j("abort",g,b)},g={abort:f};return b.error&&(e.onerror=function(){g.abort(),b.error()}),window[d]=function(f){clearTimeout(c),a(e).remove(),delete window[d],h(f,g,b)},n(b),e.src=b.url.replace(/=\?/,"="+d),a("head").append(e),b.timeout>0&&(c=setTimeout(function(){g.abort(),j("timeout",g,b)},b.timeout)),g},a.ajaxSettings={type:"GET",beforeSend:k,success:k,error:k,complete:k,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:x,xml:"application/xml, text/xml",html:y,text:"text/plain"},crossDomain:!1,timeout:0},a.ajax=function(b){var c=a.extend({},b||{});for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);e(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host);var d=c.dataType,f=/=\?/.test(c.url);if("jsonp"==d||f)return f||(c.url=m(c.url,"callback=?")),a.ajaxJSONP(c);c.url||(c.url=window.location.toString()),n(c);var j,o=c.accepts[d],r={},s=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,t=a.ajaxSettings.xhr();c.crossDomain||(r["X-Requested-With"]="XMLHttpRequest"),o&&(r.Accept=o,o.indexOf(",")>-1&&(o=o.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(o)),(c.contentType||c.data&&"GET"!=c.type.toUpperCase())&&(r["Content-Type"]=c.contentType||"application/x-www-form-urlencoded"),c.headers=a.extend(r,c.headers||{}),t.onreadystatechange=function(){if(4==t.readyState){clearTimeout(j);var b,e=!1;if(t.status>=200&&300>t.status||304==t.status||0==t.status&&"file:"==s){d=d||l(t.getResponseHeader("content-type")),b=t.responseText;try{"script"==d?(1,eval)(b):"xml"==d?b=t.responseXML:"json"==d&&(b=z.test(b)?null:a.parseJSON(b))}catch(f){e=f}e?i(e,"parsererror",t,c):h(b,t,c)}else i(null,"error",t,c)}};var u="async"in c?c.async:!0;t.open(c.type,c.url,u);for(q in c.headers)t.setRequestHeader(q,c.headers[q]);return g(t,c)===!1?(t.abort(),!1):(c.timeout>0&&(j=setTimeout(function(){t.onreadystatechange=k,t.abort(),i(null,"timeout",t,c)},c.timeout)),t.send(c.data?c.data:null),t)},a.get=function(b,c){return a.ajax({url:b,success:c})},a.post=function(b,c,d,e){return a.isFunction(c)&&(e=e||d,d=c,c=null),a.ajax({type:"POST",url:b,data:c,success:d,dataType:e})},a.getJSON=function(b,c){return a.ajax({url:b,success:c,dataType:"json"})},a.fn.load=function(b,c){if(!this.length)return this;var d,e=this,f=b.split(/\s/);return f.length>1&&(b=f[0],d=f[1]),a.get(b,function(b){e.html(d?a(t.createElement("div")).html(b.replace(u,"")).find(d).html():b),c&&c.apply(e,arguments)}),this};var B=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(B(a)+"="+B(b))},o(c,a,b),c.join("&").replace("%20","+")}})(b)});